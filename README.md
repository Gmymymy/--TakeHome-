# 矩形物体在多边形轮廓内的摆放问题解决方案

## 核心代码实现逻辑说明

### 1. 几何基础类
- **Point类**：表示二维平面上的点，用于构建更复杂的几何图形。
- **Rectangle类**：表示矩形物体，支持旋转和尺寸计算。
- **Polygon类**：表示任意多边形，实现了点在多边形内的判断算法。
- **Door类**：表示门的位置和类型，计算内开门时的阻碍区域。

### 2. 主要算法实现
- **RectanglePacker类**：核心算法类，负责将矩形物体放置在多边形轮廓内。
  - **is_rectangle_valid**：检查矩形是否在多边形内且不与其他矩形重叠。
  - **is_overlap**：检查两个矩形是否重叠。
  - **get_wall_edges**：获取多边形的所有边。
  - **find_wall_positions**：寻找沿墙的可用位置。
  - **pack_rectangles**：主算法，将所有物体沿墙放置。

### 3. 放置策略
- 优先考虑所有物品均贴墙放置。
- 支持矩形物体的90度旋转。
- 避免遮挡门的位置和内开门的阻碍区域。

## 运行环境及运行方式

### 运行环境
- Python 3.6及以上版本

### 运行方式

1. 将所有文件下载到同一目录下。
2. 运行主程序：
   ```bash
   python rectangle_packer.py
   ```

3. 运行简单测试：
   ```bash
   python simple_test.py
   ```

4. 测试示例文件：
   ```bash
   python rectangle_packer.py
   ```

## 既定输入的输出示例

### 输入格式
```json
{
    "boundary": [[0, 0], [1000, 0], [1000, 1000], [0, 1000], [0, 0]],
    "door": [[0, 400], [0, 600]],
    "isOpenInward": false,
    "algoToPlace": {
        "fridge": [1220, 1330],
        "shelf-1": [1000, 400]
    }
}
```

### 输出格式
```json
{
    "feasible": false,
    "placements": [
        {
            "center": [500.0, 200.0],
            "angle": 0
        }
    ]
}
```

## AI工具使用说明

### 使用的AI工具
- **Trae AI**：用于辅助设计算法结构、解决几何计算问题、编写代码实现和文档撰写。

### AI主要帮助的部分
- 思路拆解：将复杂的矩形摆放问题分解为可管理的子问题。
- 几何算法：提供点在多边形内的判断、矩形重叠检测等算法实现。
- 代码结构：设计清晰的类结构和函数接口。

### 关键逻辑的自主理解与调整
- 物体贴墙放置的策略：实现了沿墙滑动查找可用位置的算法。
- 内开门阻碍区域的计算：根据门的方向和位置计算阻碍区域。
- 矩形旋转的处理：支持90度旋转并重新计算边界。

## 注意事项

1. 目前实现优先考虑沿墙放置，如果空间不足，可能无法放置所有物体。
2. 内开门会占据与门宽相同的正方形区域。
3. 物体的尺寸单位应与轮廓坐标的单位一致。
4. 如果物体尺寸超过可用空间，可能无法放置。